import{_ as D,X as V,e as s,i as C,f as T,r as v,o as w,c as x,a as e,q as u,k as _,v as f,b as g,F as b}from"./index-90d68d17.js";import{a as h,b as z,e as E,h as P,d as y}from"./index-ce0dfd1e.js";import{N as M}from"./NavBarComponent-3c2e4163.js";import{_ as N}from"./marker-00ef1fab.js";import{_ as B}from"./add_h-f72fec53.js";const j="/MojPies/assets/forest-f93a1eec.png";const U={components:{VueDatePicker:V,NavBarComponent:M},setup(){const a=s(["Spacer","Trening"]),t=s(a.value[0]),r=s(""),o=s(),c=s(),l=s(""),d=s(),m=C({map:null,marker:null,markerCreated:!1});return T(()=>{const n=L.map("map").setView([50.06143,19.93658],14);m.map=n,L.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:18}).addTo(n),navigator.geolocation.getCurrentPosition(p=>{try{const{latitude:i,longitude:k}=p.coords;n.setView([i,k],14)}catch{console.log("Not able to get current position")}}),n.on("moveend",function(p){const i=n.getCenter();console.log("map center"),console.log(i),o.value=[i.lat,i.lng],console.log(o.value)})}),{eventTypes:a,eventType:t,eventLocation:r,eventGeolocation:o,eventDate:c,eventDescription:l,markerPosition:d}},methods:{async addEvent(){if(!this.eventLocation||!this.eventDate){alert("Proszę uzupełnić wszystkie pola");return}if(h.currentUser){const t=h.currentUser.uid,r=z(y,"users",t),o={type:this.eventType,location:this.eventLocation,geolocation:this.eventGeolocation,date:this.eventDate,description:this.eventDescription,attendees:[r]},c=E(y,"events");await P(c,o),console.log("Event added successfully");var a=new Audio("/MojPies/bark.mp3");a.play(),this.$router.push("/events")}}},data(){return{eventGeolocation:{},map:null}}},S={class:"container"},q={class:"row justify-content-center align-items-center"},A=e("div",{class:"col-md-4 text-center"},[e("img",{src:j,class:"img-fluid"})],-1),G={class:"col-md-4"},F=e("h4",{class:"mt-3"},"Rodzaj",-1),I={class:"chip-container"},R=e("h4",{class:"mt-3"},"Opis",-1),X=e("h4",{class:"mt-3"},"Data i godzina",-1),H=e("h4",{class:"mt-3"},"Miejsce",-1),O=e("div",{class:"map-wrapper"},[e("div",{id:"map"},[e("div",{id:"custom-icon",style:{position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)","z-index":"999"}},[e("img",{src:N,alt:"Custom Icon",class:"marker"})])])],-1),Z={class:"mt-3"};function J(a,t,r,o,c,l){const d=v("VueDatePicker"),m=v("NavBarComponent");return w(),x(b,null,[e("div",S,[e("div",q,[A,e("div",G,[F,e("div",I,[e("div",{class:u(["chip",{selected:o.eventType==="Spacer"}]),onClick:t[0]||(t[0]=n=>o.eventType="Spacer")}," Spacer ",2),e("div",{class:u(["chip",{selected:o.eventType==="Trening"}]),onClick:t[1]||(t[1]=n=>o.eventType="Trening")}," Trening ",2)]),R,_(e("textarea",{class:"form-control mb-3","onUpdate:modelValue":t[2]||(t[2]=n=>o.eventDescription=n)},null,512),[[f,o.eventDescription]]),X,g(d,{class:"mb-3",format:"dd/MM/yyyy H:mm",modelValue:o.eventDate,"onUpdate:modelValue":t[3]||(t[3]=n=>o.eventDate=n),"enable-time-picker":!0,clearable:!1,"text-input":"",required:""},null,8,["modelValue"]),H,_(e("input",{type:"text",class:"form-control mb-3","onUpdate:modelValue":t[4]||(t[4]=n=>o.eventLocation=n),required:""},null,512),[[f,o.eventLocation]]),O]),e("div",Z,[e("img",{src:B,width:"150",onClick:t[5]||(t[5]=(...n)=>l.addEvent&&l.addEvent(...n))})])])]),g(m)],64)}const ee=D(U,[["render",J]]);export{ee as default};
