import{_ as B,e as D,f as M,u as C,r as S,o as m,c as l,a as t,t as _,F as x,m as V,g as N,b as h,w as g,d as v}from"./index-8c98f5d5.js";import{J as b,b as F,d as k,t as $,e as K,g as R,r as T,s as A}from"./index-ce0dfd1e.js";import{N as I}from"./NavBarComponent-9e99369d.js";import{_ as J}from"./dogForum-944f8174.js";import{_ as L}from"./add_h-f72fec53.js";const P={components:{NavBarComponent:I},setup(){const p=D(),u=D([]),y=s=>{const a=new Date(s.toMillis()),r=String(a.getDate()).padStart(2,"0"),i=String(a.getMonth()+1).padStart(2,"0"),e=a.getFullYear();return`${r}.${i}.${e}`},o=async s=>{const a=await b(s);return{name:a.data().name,id:a.id}};return M(async()=>{const s=C(),a=await b(F(k,`forum/${s.params.sectionKey}`)),r=a.data(),i={id:a.id,sectionName:r.sectionName};p.value=i;const e=await $(K(k,`forum/${s.params.sectionKey}/threads`));u.value=await Promise.all(e.docs.map(async n=>{const c=n.data(),f=await o(c.authorRef);let d;return await R(T(A,`images/${c.authorRef.id}`)).then(w=>{d=w}).catch(w=>{d="/MojPies/profile.png"}),{id:n.id,date:c.date,...c,authorData:f,imageSrc:d}})),u.value.sort((n,c)=>{const f=new Date(n.date.toMillis()),d=new Date(c.date.toMillis());return f-d})}),{currentSection:p,threads:u,formatDate:y}}},U={class:"container",style:{"margin-bottom":"50px"}},j=t("div",{class:"text-center"},[t("img",{src:J,alt:"Dogs",class:"forum-image"})],-1),E={key:0},O={class:"text-center"},Y={class:"col-9"},q=t("hr",null,null,-1),z={key:0},G={class:"card-body"},H={class:"card-text text-muted"},Q=["src"],W={class:"text-center mt-3"},X=t("img",{class:"bottom-button",src:L,width:"150"},null,-1);function Z(p,u,y,o,s,a){const r=S("router-link"),i=S("NavBarComponent");return m(),l(x,null,[t("div",U,[j,o.currentSection?(m(),l("div",E,[t("h1",O,_(o.currentSection.sectionName),1),t("div",Y,[q,o.threads?(m(),l("div",z,[(m(!0),l(x,null,V(o.threads,(e,n)=>(m(),l("div",{key:n,class:"card mb-1"},[h(r,{to:{name:"forumThread",params:{sectionKey:o.currentSection.id,threadId:e.id}},class:"card-title"},{default:g(()=>[t("div",G,[v(_(e.topic)+" ",1),t("p",H,[t("small",null,[h(r,{to:{name:"profile",params:{userId:e.authorData.id}}},{default:g(()=>[t("img",{src:e.imageSrc,class:"user-avatar rounded-circle",alt:"User avatar"},null,8,Q),v(" "+_(e.authorData.name),1)]),_:2},1032,["to"]),v(", "+_(o.formatDate(e.date)),1)])])])]),_:2},1032,["to"])]))),128))])):N("",!0)]),t("div",W,[h(r,{to:{name:"forumNewThread",params:{sectionKey:o.currentSection.id}}},{default:g(()=>[X]),_:1},8,["to"])])])):N("",!0)]),h(i)],64)}const rt=B(P,[["render",Z]]);export{rt as default};
