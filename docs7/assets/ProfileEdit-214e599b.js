import{r as I,s as w,u as x,J as P,a as y,d as b,g as B,b as S}from"./index-3872b343.js";import{_ as U,o as l,c as d,a as e,e as V,f as N,g as j,h as F,u as E,r as D,b as k,i as M,j as p,v as m,F as g,k as C,l as R,p as O,m as z}from"./index-a9f1a630.js";import{N as q}from"./NavBarComponent-6c623fb1.js";const A={props:{userId:{type:String,required:!0}},data(){return{file:null}},methods:{onFileSelected(a){this.file=a.target.files[0]},uploadFile(){const a=I(w,`images/${this.userId}`);x(a,this.file).then(o=>{console.log("Załadowano plik"),window.location.reload()})}}},J={class:"text-center"};function L(a,o,v,t,_,c){return l(),d("div",J,[e("input",{type:"file",onChange:o[0]||(o[0]=(...u)=>c.onFileSelected&&c.onFileSelected(...u))},null,32),_.file?(l(),d("button",{key:0,onClick:o[1]||(o[1]=(...u)=>c.uploadFile&&c.uploadFile(...u))},"Upload")):V("",!0)])}const T=U(A,[["render",L]]),Z="/MojPies/assets/save_h-e6fdb895.png";const G={components:{NavBarComponent:q,ImagePicker:T},setup(){const a=N(),o=j({id:null,name:"",city:"",description:"",favourites:[],dogs:[]});F(async()=>{const n=E();console.log(n.params.userId),a.value=n.params.userId;const r=(await P(y(b,`users/${n.params.userId}`))).data();o.id=n.params.userId,o.name=r.name,o.city=r.city,o.description=r.description,o.favourites=r.favourites||[],o.dogs=r.dogs||[];const i=document.getElementById("profile-image");B(I(w,`images/${n.params.userId}`)).then(h=>{i.setAttribute("src",h)}).catch(h=>{i.setAttribute("src","/MojPies/assets/profile.png")})});const v=()=>{o.dogs.push({name:"",yearOfBirth:"",race:""})},t=n=>{o.dogs.splice(n,1)},_=()=>{o.favourites.push("")},c=n=>{o.favourites.splice(n,1)};async function u(){const n=y(b,"users",a.value);try{await S(n,{name:o.name,city:o.city,description:o.description,favourites:o.favourites,dogs:o.dogs}),console.log("Changes saved successfully!"),R.push({name:"profile",params:{userId:a.value}})}catch(s){console.log("Error saving changes: ",s)}}return{userId:a,profileData:o,addDog:v,removeDog:t,addPlace:_,removePlace:c,saveChanges:u}}},f=a=>(O("data-v-673ae0f6"),a=a(),z(),a),H={class:"container ml-2 me-2",style:{"margin-bottom":"70px"}},K={key:0},Q=f(()=>e("div",{class:"text-center"},[e("img",{id:"profile-image",class:"card-img-top user-avatar rounded-circle mb-3"})],-1)),W={class:"form-group"},X=f(()=>e("label",{for:"profileData.userName"},"Nazwa użytkownika",-1)),Y={class:"form-group"},$=f(()=>e("label",{for:"profileData.city"},"Miejscowość",-1)),ee={class:"form-group"},oe=f(()=>e("label",{for:"profileData.description"},"Opis",-1)),te={class:"form-group"},se=f(()=>e("label",{for:"profileData.favourite-places"},"Ulubione miejsca na wyjścia z psem",-1)),ae={class:"form-row"},ne={class:"col"},re=["onUpdate:modelValue"],ie={class:"col-auto"},le=["onClick"],de={class:"form-group"},ce=f(()=>e("label",{for:"dogs"},"Psy",-1)),ue={class:"form-row"},pe={class:"col"},me=["onUpdate:modelValue"],fe={class:"col"},_e=["onUpdate:modelValue"],ve={class:"col"},ge=["onUpdate:modelValue"],he={class:"col-auto"},ye=["onClick"],be={type:"submit",class:"d-block mx-auto mt-3"};function De(a,o,v,t,_,c){const u=D("ImagePicker"),n=D("NavBarComponent");return l(),d(g,null,[e("div",H,[t.profileData?(l(),d("div",K,[Q,e("div",null,[k(u,{"user-id":t.userId},null,8,["user-id"])]),e("form",{onSubmit:o[6]||(o[6]=M((...s)=>t.saveChanges&&t.saveChanges(...s),["prevent"]))},[e("div",W,[X,p(e("input",{type:"text",class:"form-control",id:"name","onUpdate:modelValue":o[0]||(o[0]=s=>t.profileData.name=s),required:""},null,512),[[m,t.profileData.name]])]),e("div",Y,[$,p(e("input",{type:"text",class:"form-control",id:"city","onUpdate:modelValue":o[1]||(o[1]=s=>t.profileData.city=s)},null,512),[[m,t.profileData.city]])]),e("div",ee,[oe,p(e("textarea",{class:"form-control",id:"description",rows:"3","onUpdate:modelValue":o[2]||(o[2]=s=>t.profileData.description=s)},null,512),[[m,t.profileData.description]])]),e("div",te,[se,(l(!0),d(g,null,C(t.profileData.favourites,(s,r)=>(l(),d("div",{key:r},[e("div",ae,[e("div",ne,[p(e("input",{type:"text",class:"form-control","onUpdate:modelValue":i=>t.profileData.favourites[r]=i},null,8,re),[[m,t.profileData.favourites[r]]])]),e("div",ie,[e("button",{type:"button",class:"btn btn-danger",onClick:i=>t.removePlace(r)},"Usuń",8,le)])])]))),128)),e("div",null,[e("button",{type:"button",class:"btn btn-success mt-2",onClick:o[3]||(o[3]=(...s)=>t.addPlace&&t.addPlace(...s))},"Dodaj miejsce")])]),e("div",de,[ce,(l(!0),d(g,null,C(t.profileData.dogs,(s,r)=>(l(),d("div",{key:r},[e("div",ue,[e("div",pe,[p(e("input",{type:"text",class:"form-control",placeholder:"Imię","onUpdate:modelValue":i=>s.name=i},null,8,me),[[m,s.name]])]),e("div",fe,[p(e("input",{type:"text",class:"form-control",placeholder:"Rok urodzenia","onUpdate:modelValue":i=>s.yearOfBirth=i},null,8,_e),[[m,s.yearOfBirth]])]),e("div",ve,[p(e("input",{type:"text",class:"form-control",placeholder:"Rasa","onUpdate:modelValue":i=>s.race=i},null,8,ge),[[m,s.race]])]),e("div",he,[e("button",{type:"button",class:"btn btn-danger",onClick:i=>t.removeDog(r)},"Usuń",8,ye)])])]))),128)),e("div",null,[e("button",{type:"button",class:"btn btn-success mt-2",onClick:o[4]||(o[4]=(...s)=>t.addDog&&t.addDog(...s))},"Dodaj psa")])]),e("button",be,[e("img",{src:Z,width:"150",onClick:o[5]||(o[5]=(...s)=>t.saveChanges&&t.saveChanges(...s))})])],32)])):V("",!0)]),k(n)],64)}const we=U(G,[["render",De],["__scopeId","data-v-673ae0f6"]]);export{we as default};
